
lirc = require '../lirc'


module.exports = {
	data: (data) ->
		lirc.emit 'data', data

		lirc.parse.data data

	connect: () ->
		console.log 'Socket, Connect'

		user = lirc.session.server.user

		if user.pass then lirc.send "PASS #{ user.pass }"

		nick = user.nick
		
		user = [
			user.username
			user.username
			user.username
			':' + user.realname
		].join ' '

		lirc.send "NICK #{ nick }"
		lirc.send "USER #{ user }"

		lirc.emit 'connect'
	
	error: (err) ->
		console.log 'Socket, Error: ', err
		lirc.emit 'error', err

	close: (hadError) ->
		console.log 'Socket, close: hadError = ', hadError
		lirc.emit 'close', hadError

	timeout: () ->
		console.log 'Socket, Timeout'
		lirc.emit 'timeout'

	end: () ->
		console.log 'Socket, End'
		lirc.emit 'end'

}
